{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "component-templates invocation input",
  "type": "object",
  "properties": {
    "config": {
      "type": "object",
      "description": "Template configuration (see component schema)",
      "default": {
        "templates": {
          "text": "Hello {{name}}"
        }
      },
      "properties": {
        "templates": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "text": { "type": "string" },
            "output_path": { "type": "string" },
            "wrap": { "type": "boolean" },
            "routing": { "type": "string" }
          },
          "required": ["text"]
        }
      },
      "required": ["templates"],
      "additionalProperties": false
    },
    "msg": {
      "type": "object",
      "description": "Channel message envelope forwarded to the template context",
      "default": {}
    },
    "payload": {
      "type": "object",
      "description": "Incoming node payload exposed to the template context",
      "default": {}
    },
    "state": {
      "type": "object",
      "description": "Runner-injected execution snapshot; includes input and previous node outputs when input is an object"
    },
    "node_id": {
      "type": "string",
      "description": "Optional node id to expose state.nodes.<id> as node/node_payload in the template context"
    },
    "connections": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Downstream connections (not used by this component)"
    }
  },
  "required": ["config", "msg", "payload"]
}
